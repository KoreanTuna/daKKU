<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>홈 화면 폴더</title>
    <link rel="stylesheet" href="/stylesheets/textStyle.css" />
    <link rel="stylesheet" href="/stylesheets/modal.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
    .city {display:none}
    </style>
  
    <script src="/script/style.js"></script>
    <script>
      let background = '';
      let icon = '';
      let pagecolor = '';
    </script>
 
</head>

<body>

  <button onclick="openModal()" style="background-color: rgb(54, 54, 233); color: white; outline: none; border-radius: 5px; padding: 12px;">customize
  </button>
  <div id="myModal" class="modal">
    <div id="modalContent" class="modal-content2">
      <div id="modalHeader" class="custom-header">
          <h1>커스터마이즈</h1>
          <span class="close-btn" onclick="closeModal();">&times;</span>
      </div>


        <div class="w3-bar w3-border-bottom" style="padding:20px;">
         <button class="tablink w3-bar-item w3-button" onclick="openCity(event, 'London')">Background</button>
         <button class="tablink w3-bar-item w3-button" onclick="openCity(event, 'Paris')">Font</button>
         <button class="tablink w3-bar-item w3-button" onclick="openCity(event, 'Tokyo')">Folder Style</button>
        </div>
      
        <div id="London" class="w3-container city">
         <h1 style="padding-left:30px; padding-top:20px;">Background</h1>
         <p style="padding-left:30px;">배경화면을 선택해주세요.</p>
         <img id="default" src="/images/bg/vacationBG.png" style="width: 400px; padding: 20px 30px 20px 30px;">

         <div style="padding-left: 25px;">
         <div class="gallery">
          <a target="_blank">
            <button onclick="buttonImg1()" class="backgroundChoice">
              <img id="hp" src="/images/bg/vacationBG.png" alt="Default" width="120" height="80">
            </button>
          </a>
        </div>
        
        <div class="gallery">
          <a target="_blank">
            <button onclick="buttonImg2()" class="backgroundChoice">
              <img id="space" src="/images/bg/cyberBG.png" alt="Space" width="120" height="80">
            </button>
          </a>
        </div>
        
        <div class="gallery">
          <a target="_blank">
            <button onclick="buttonImg3()" class="backgroundChoice">
              <img id="orange" src="/images/bg/farmerBG.png" alt="Orange Man" width="120" height="80">
            </button>
          </a>
        </div>
        
        <div class="gallery">
          <a target="_blank">
            <button onclick="buttonImg4()" class="backgroundChoice">
              <img id="sweet" src="/images/bg/bakerBG.png" alt="Festival" width="120" height="80">
            </button>
          </a>
        </div>

         <div style="text-align:end;">
          <button id="BGconfirmButton" 
          style="background-color: rgb(54, 54, 233); color:white; outline: none;border-radius: 5px; padding: 12px 20px 12px 20px; margin: 40px 15px 10px 10px;">설정하기
          </button>
         </div>
        </div>
      </div>
      
        <div id="Paris" class="w3-container city">
         <h1 style="padding-left:30px; padding-top:20px;">Font</h1>
         <p style="padding-left:30px;">현재 폰트는 '여기어때 잘난체'입니다.</p>
         <div class="grid-container2">
          <div class="item1" style="font-family: 'jalnan';">여기어때 잘난체</div>
          <button class="item2" style="background-color:rgb(54, 54, 233); font-size:20px; width:180px; color: white; outline: none; border-radius: 5px;">현재 폰트</button>
          <div class="item3" style="font-family: 'pretendard';">Pretendard</div>  
          <button class="item4" style="font-size:20px; width:180px; outline: none; border-radius: 5px;">선택하기</button>
          <div class="item5" style="font: gothic;">나눔고딕</div>
          <button class="item6" style="font-size:20px; width:180px; outline: none; border-radius: 5px;">선택하기</button>
          <div class="item7" style="font: 배민 한나 pro;">배민 한나 pro</div>
          <button class="item8" style="font-size:20px; width:180px; outline: none; border-radius: 5px;">선택하기</button>
          <div class="item9" style="font: Noto Sans;">Noto Sans</div>  
          <button class="item10" style="font-size:20px; width:180px; outline: none; border-radius: 5px;">선택하기</button>
        </div>
        <button onclick="reset()" style="background-color: rgb(54, 54, 233); color:white; outline: none; position:absolute; border-radius: 5px; padding: 12px 20px 12px 20px; margin: 40px 18px 10px 658px;">설정하기
        </button>
        
        </div>
      
        <div id="Tokyo" class="w3-container city">
         <h1 style="padding-left:30px; padding-top:20px;">Folder Style</h1>
         <h2 style="padding-left:30px; color: rgb(116, 116, 116);">Color</h2><br>
         <div class="grid-container" style="grid-gap:30px; display: flex; flex-direction: row; padding-left:30px;">
          <form action="/action_page.php">
            <input type="color" id="picker" onchange="changename()" id="favcolor" name="favcolor" value="#533CDE" style="width:100px; height: 100px;"><br><br>
          </form>
          <input type="text" id="hex" value="#533CDE" style="width: 200px; height: 70px; font-size: 25px;"><br><br>
         </div>


         <h2 style="padding-left:30px; color:rgb(116, 116, 116);">Icon</h2><br>
         <div class="grid-container iconBtns"  style="grid-gap:30px; display: flex; flex-direction: row; padding-left:30px;">
          <button class="grid-item iconChoice" id="button-carrot" onclick="change1()">
            <img src="/images/농장주.png">
          </button>
          <button class="grid-item iconChoice" id="button-cyber" onclick="change2()">
            <img src="/images/사이버.png">
          </button>
          <button class="grid-item iconChoice" id="button-vacation" onclick="change3()">
            <img src="/images/방학.png">
          </button>  
          <button class="grid-item iconChoice" id="button-baker" onclick="change4()">
            <img src="/images/베이커.png">
          </button>
        </div>
        <button id="ColIconconfirmButton" 
         style="background-color: rgb(54, 54, 233); color:white; outline: none; position:absolute; border-radius: 5px; padding: 12px 20px 12px 20px; margin: 15px 15px 10px 650px;">설정하기
        </button>
        
        </div>
      
       </div>
      </div>


        </div>
      

    </div>
  </div>
  <script>
document.addEventListener("keydown", closeModalOnEsc);
        function closeModalOnEsc(e) {
            e = e || window.event;
            const modal = document.getElementById('myModal');
            if (e.key === "Escape" && modal.style.display === "block") {
                closeModal();
            }
        }

        function openModal() {
            const modal = document.getElementById('myModal');
            const modalContent = document.getElementById('modalContent');
            modal.style.display = 'block';

            // 화면 중앙에 모달창 배치
            modalContent.style.position = 'fixed';
            modalContent.style.top = '50%';
            modalContent.style.left = '50%';
            modalContent.style.transform = 'translate(-50%, -90%)';
        }

        function closeModal() {
            document.getElementById('myModal').style.display = 'none';
        }
        function dragElement(elmnt) {
            const header = elmnt.querySelector(".custom-header");
            let offsetX, offsetY;

            header.onmousedown = dragMouseDown;

            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                offsetX = e.clientX - elmnt.getBoundingClientRect().left;
                offsetY = e.clientY - elmnt.getBoundingClientRect().top;

                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }

            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();

                elmnt.style.position = "fixed";
                elmnt.style.left = (e.clientX - offsetX) + "px";
                elmnt.style.top = (e.clientY - offsetY) + "px";
                elmnt.style.margin = 0; // 이 부분을 추가해주세요
                elmnt.style.transform = "none"; // 이 부분을 추가해주세요
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }


        // document.getElementsByClassName("tablink")[0].click();

        function openCity(evt, cityName) {
          var i, x, tablinks;
          x = document.getElementsByClassName("city");
          for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
          }
          tablinks = document.getElementsByClassName("tablink");
          for (i = 0; i < x.length; i++) {
            tablinks[i].classList.remove("w3-light-grey");
          }
          document.getElementById(cityName).style.display = "block";
          evt.currentTarget.classList.add("w3-light-grey");
        }

        // 버튼누르면 배경화면 바뀌도록
        var bgimage = backgroundImageURL;
        function buttonImg1() {
          document.getElementById("default").src = "/images/bg/vacationBG.png"
          // bgimage.src="../images/hpBackground.png";
          background = "방학";
          console.log(background);
        }
        function buttonImg2() {
          document.getElementById("default").src = "/images/bg/cyberBG.png"
          // bgimage.src="../images/space.png";
          background = "사이버";
        }
        function buttonImg3() {
          document.getElementById("default").src = "/images/bg/farmerBG.png"
          // bgimage.src="../images/orange.png";
          background = "농장주";
        }
        function buttonImg4() {
          document.getElementById("default").src = "/images/bg/bakerBG.png"
          // bgimage.src="../images/Sweet House Festival 1.png";
          background = "베이커";
        }

        // 아이콘 버튼누르면 폴더스타일 지정했다는 표시
        function change1() {
          icon = "방학";
          var select = document.getElementById("button-carrot");
          select.style.border="3px solid red"
          var another1 = document.getElementById("button-cyber");
          another1.style.border="1px solid gray"
          var another2 = document.getElementById("button-vacation");
          another2.style.border="1px solid gray"
          var another3 = document.getElementById("button-baker");
          another3.style.border="1px solid gray"
        }
        function change2() {
          icon = "사이버";
          var select = document.getElementById("button-cyber");
          select.style.border="3px solid red"
          var another1 = document.getElementById("button-carrot");
          another1.style.border="1px solid gray"
          var another2 = document.getElementById("button-vacation");
          another2.style.border="1px solid gray"
          var another3 = document.getElementById("button-baker");
          another3.style.border="1px solid gray"
        }
        function change3() {
          icon = "방학";
          var select = document.getElementById("button-vacation");
          select.style.border="3px solid red"
          var another1 = document.getElementById("button-carrot");
          another1.style.border="1px solid gray"
          var another2 = document.getElementById("button-cyber");
          another2.style.border="1px solid gray"
          var another3 = document.getElementById("button-baker");
          another3.style.border="1px solid gray"
        }
        function change4() {
          icon = "베이커";
          var select = document.getElementById("button-baker");
          select.style.border="3px solid red"
          var another1 = document.getElementById("button-carrot");
          another1.style.border="1px solid gray"
          var another2 = document.getElementById("button-cyber");
          another2.style.border="1px solid gray"
          var another3 = document.getElementById("button-vacation");
          another3.style.border="1px solid gray"
        }
        function reset() {
          var another4 = document.getElementById("button-baker");
          another4.style.border="1px solid gray"
          var another1 = document.getElementById("button-carrot");
          another1.style.border="1px solid gray"
          var another2 = document.getElementById("button-cyber");
          another2.style.border="1px solid gray"
          var another3 = document.getElementById("button-vacation");
          another3.style.border="1px solid gray"
        }

        // 바뀐 색상 hex로 나타내기
        function changename() {
          var choose = document.getElementById("picker");
          var result = document.getElementById("hex");
          result.value = choose.value;
          pagecolor = result.value;
        }

        // let backgroundURL = "/images/bg/hpBackground.png";
        // let folderURL = "";
        // let folderAddURL = "";
        // let color = "";
        let backgroundURL = "/images/bg/cyberBG.png";
        let folderURL = "/images/folderIcon/folder_icon_cyber.png"
        let folderAddURL = "/images/folderIcon/folder_add_cyber.png";
        let color = "2B34FD";
        const boxConfirm = document.getElementsByClassName("grid-item");

        //배경화면 설정하기 버튼 눌렀을 때
        const backgroundBtns = document.getElementsByClassName('backgroundChoice');
        const backgroundChange = background;
        const colorBtn = document.getElementsByClassName('colorChoice');
        const colorChange = pagecolor;
        const iconBtns = document.getElementsByClassName('iconChoice');
        const iconChange = icon;

        for (var i = 0; i < backgroundBtns.length; i++) {
            (function (index) {
                backgroundBtns[index].addEventListener("click", function () {
                    switch (background) {
                        case "사이버":
                
                            backgroundURL = "/images/bg/cyberBG.png";
                            folderURL = "/images/folderIcon/folder_icon_cyber.png"
                            folderAddURL = "/images/folderIcon/folder_add_cyber.png";
                            // color = "2B34FD";
                            break;
                        case "농장주":
                            backgroundURL = "/images/bg/farmerBG.png";
                            folderURL = "/images/folderIcon/folder_icon_farmer.png"
                            folderAddURL = "/images/folderIcon/folder_add_farmer.png";
                            // color = "A24C1F";
                            break;
                        case "베이커":
                            backgroundURL = "/images/bg/bakerBG.png";
                            folderURL = "/images/folderIcon/folder_icon_baker.png"
                            folderAddURL = "/images/folderIcon/folder_add_baker.png";
                            // color = "E13A8A";
                            break;
                        case "방학":
                            backgroundURL = "/images/bg/vacationBG.png";
                            folderURL = "/images/folderIcon/folder_icon_vacation.png"
                            folderAddURL = "/images/folderIcon/folder_add_vacation.png";
                            // color = "533CDE";
                            break;

                        default:
                            backgroundURL = "/images/bg/cyberBG.png";
                            folderURL = "/images/folderIcon/folder_icon_cyber.png"
                            folderAddURL = "/images/folderIcon/folder_add_cyber.png";
                            color = "2B34FD";
                            break;
                    }
                })
            })(i);
        }

        const BGconfirmButton = document.getElementById("BGconfirmButton");
        BGconfirmButton.addEventListener("click", async () => {
          

          console.log(backgroundURL);
          console.log(folderURL);
          console.log(folderAddURL);
          console.log(color);
      
            let data = {
                backgroundURL: backgroundURL,
                folderAddURL: folderAddURL,
                folderURL: folderURL,
                color: color,
            };
            const response = await fetch("/customize/saveCustom", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data),
            });
        });

        //색상과 아이콘 설정하기 눌렀을 때
        for (var i = 0; i < iconBtns.length; i++) {
            (function (index) {
                iconBtns[index].addEventListener("click", function () {
                    switch (icon) {
                        case "사이버":
                            backgroundURL = "/images/bg/cyberBG.png";
                            folderURL = "/images/folderIcon/folder_icon_cyber.png"
                            folderAddURL = "/images/folderIcon/folder_add_cyber.png";
                            // color = "2B34FD";
                            break;
                        case "농장주":
                            backgroundURL = "/images/bg/farmerBG.png";
                            folderURL = "/images/folderIcon/folder_icon_farmer.png"
                            folderAddURL = "/images/folderIcon/folder_add_farmer.png";
                            // color = "A24C1F";
                            break;
                        case "베이커":
                            backgroundURL = "/images/bg/bakerBG.png";
                            folderURL = "/images/folderIcon/folder_icon_baker.png"
                            folderAddURL = "/images/folderIcon/folder_add_baker.png";
                            // color = "E13A8A";
                            break;
                        case "방학":
                            backgroundURL = "/images/bg/vacationBG.png";
                            folderURL = "/images/folderIcon/folder_icon_vacation.png"
                            folderAddURL = "/images/folderIcon/folder_add_vacation.png";
                            // color = "533CDE";
                            break;

                        default:
                            backgroundURL = "/images/bg/cyberBG.png";
                            folderURL = "/images/folderIcon/folder_icon_cyber.png"
                            folderAddURL = "/images/folderIcon/folder_add_cyber.png";
                            color = "2B34FD";
                            break;
                    }
                })
            })(i);
        }

        const ColIconconfirmButton = document.getElementById("ColIconconfirmButton");
        ColIconconfirmButton.addEventListener("click", async () => {

            let data = {
                backgroundURL: backgroundURL,
                folderAddURL: folderAddURL,
                folderURL: folderURL,
                color: color,
            };
            const response = await fetch("/customize/saveCustom", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data),
            });
        });



  </script>
</body>
</html>
